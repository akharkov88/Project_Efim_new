<div class="panel-body">
    <div class="row">
        <div class="col-lg-12">
            <form role="form" id="formFrame">

                <div class="form-group">
                    <label>Selects</label>
                    <select class="form-control" id="select_one">
                        <option value="0">первое значение</option>
                        <option value="1">второе значение</option>
                        <option value="2">3</option>
                        <option value="3">4</option>
                        <option value="4">5</option>
                    </select>

                    <colgroup>
                        <col span="2" style="background:#e5ebf2">
                        <!-- С помощью этой конструкции задаем цвет фона для первых двух столбцов таблицы-->
                        <col style="background-color:LightCyan">
                        <!-- Задаем цвет фона для следующего (одного) столбца таблицы-->
                    </colgroup>

                </div>
                <div class="style_table" id='style_table' style="display:none;">
                    <table class="first iksweb" id="first_table">
                        <tbody>
                        <tr>
                            <td>№</td>
                            <td rowspan="2">Наименование</td>
                            <td colspan="4">Стоимость</td>
                            <td>Добавить вид работ
                                <button class="editbtn" id='button_table_2'>+</button>
                            </td>
                        </tr>
                        <tr>
                            <td>п/п</td>
                            <td>Ед.изм.</td>
                            <td>Кол-во</td>
                            <td>Цена</td>
                            <td>Всего</td>
                            <td>Добавить значение
                                <button class="editbtn" id="button_table_1">+</button>
                            </td>
                        </tr>
                        </tbody>
                    </table>

                </div>
            </form>

        </div>

    </div>
</div>

 <script>
                                            // Заголовки для таблиц
                                            let array_table = [
                                                {
                                                    property_name: 'первое значение',
                                                    arr: ['для первого значения 1ый input', 'для первого значения 2ый input', 'для первого значения 3ый input', 'для первого значения 4ый input', 'для первого значения 5ый input']
                                                },
                                                {
                                                    property_name: 'второе значение',
                                                    arr: ['для второго значения 1ый input', 'для второго значения 2ый input', 'для второго значения 3ый input', 'для второго значения 4ый input', 'для второго значения 5ый input']
                                                },
                                                {
                                                    property_name: 'третье значение',
                                                    arr: ['для третьего значения 1ый input', 'для третьего значения 2ый input', 'для третьего значения 3ый input', 'для третьего значения 4ый input', 'для третьего значения 5ый input']
                                                },
                                                {
                                                    property_name: 'четвертое значение',
                                                    arr: ['для четвертого значения 1ый input', 'для четвертого значения 2ый input', 'для четвертого значения 3ый input', 'для четвертого значения 4ый input', 'для четвертого значения 5ый input']
                                                },
                                                {
                                                    property_name: 'пятое значение',
                                                    arr: ['для пятого значения 1ый input longlonglonglonglonglonglonglonglong', 'для пятого значения 2ый input', 'для пятого значения 3ый input', 'для пятого значения 4ый input', 'для пятого значения 5ый input']
                                                },
                                            ]
                                            select_one.onchange = function () {
                                                // отображение таблицы
                                                document.getElementById("style_table").style.display = "block";

                                                let e = document.getElementById("select_one");
                                                let value = e.value;
                                                let text = e.options[e.selectedIndex].text;

                                                document.getElementById('input_table_1').innerText = array_table[value].arr[0];
                                                document.getElementById('input_table_2').innerText = array_table[value].arr[1];
                                                document.getElementById('input_table_3').innerText = array_table[value].arr[2];
                                                document.getElementById('input_table_4').innerText = array_table[value].arr[3];
                                                document.getElementById('input_table_5').innerText = array_table[value].arr[4];
                                            }
                                            //<input type="text" name="example" list="exampleList"><datalist id="exampleList"><option value="A"><option value="B"></datalist>

                                            // для удаленной таблицы

                                            let count_table = 1;
                                            let arr_count_table = [];
                                            arr_count_table.push(count_table);
                                            button_table_1.onclick = function () {
                                                $("#first_table").append(`<tr id = "stroka${count_table}"><td contenteditable="false" id = "nn${count_table}">${arr_count_table.length}</td><td contenteditable="true" style="padding: 0;"><input type="text" name="example" list="exampleList"     style = "width: 100%; height: 100%; border:  0; background: radial-gradient(farthest-corner at 50% 50%, white, #e5ebf2);"><datalist id="exampleList"><option value="A"><option value="B"></datalist></td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td><td contenteditable="true"></td><td>удалить строку  <button class="delbtn" id="delbtn${count_table}">-</button></td></tr>`);
                                                //$('#table_container').append(`<tr></tr><tr><td>удалить строку  <button class="delbtn" id="delbtn${count_table}">-</button></td></tr>`)
                                                count_table++
                                                arr_count_table.push(count_table);
                                            }
                                            // картинка мусорки <i class="fa fa-trash-o" aria-hidden="true"></i>
                                            button_table_2.onclick = function () {
                                                $("#first_table").append(`<tr id = "stroka${count_table}"><td contenteditable="false" id = "nn${count_table}">${arr_count_table.length}</td> <td contenteditable="true" style="padding: 0;"><input type="text" name="example" list="exampleList_vid_rabot"     style = "width: 100%; height: 100%; border:  0; background: radial-gradient(farthest-corner at 50% 50%, white, #e5ebf2);"><datalist id="exampleList_vid_rabot"><option value="Стоимость работ"><option value="Стоимость материала"></datalist></td><td colspan="3" contenteditable="true"></td><td contenteditable="true"></td><td>удалить строку  <button class="delbtn" id="delbtn${count_table}">-</button></td></tr>`);
                                                //$('#table_container').append(`<tr></tr><tr><td>удалить строку  <button class="delbtn" id="delbtn${count_table}">-</button></td></tr>`)
                                                count_table++
                                                arr_count_table.push(count_table);
                                            }
                                            const table = document.getElementById('first_table');
                                            {# почему submit???#}
                                            table.addEventListener('click', function handleClick() {
                                                if (event.target.type == 'submit' && event.target.id.slice(0, 6) == 'delbtn') {
                                                    {# почему submit???#}
                                                    num_id = Number(event.target.id.slice(6, event.target.id.length))
                                                    console.warn(document.getElementById('stroka' + num_id))
                                                    document.getElementById(`stroka${num_id}`).remove()
                                                    //document.getElementById(`delbtn${num_id}`).parentElement.remove()
                                                    arr_count_table.splice(arr_count_table.indexOf(num_id), 1)
                                                    //arr_count_table.pop()
                                                    count_table = arr_count_table[arr_count_table.length - 1]
                                                    console.warn(arr_count_table, ' ', count_table);

                                                    let podcount = 1;
                                                    let delid = num_id;
                                                    let totalRowCount = first_table.rows.length
                                                    {#alert(totalRowCount - 2)#}
                                                    // получаю массив всех ID строк из таблицы first_table. splice отрезает id маски - 2 строки.
                                                    let arrIdTable = [];
                                                    $("#first_table tr").each(function () {
                                                        arrIdTable.push(this.id);
                                                    });
                                                    arrIdTable.splice(0, 2)
                                                    console.warn(arrIdTable);
                                                    // обновляю отображение номера строки в первом столбце по ID = 'nn'+${count_table}
                                                    for (let i of arrIdTable) {
                                                        document.getElementById('nn' + i.slice(6, i.length)).innerText = arrIdTable.indexOf(i) + 1;
                                                    }

                                                    // замена id после удаления строки. вариант изменения. каждый ID строки, нужно будет перезаписывать
                                                    {# console.warn('podcount = ' + podcount)
                                                     for (let i = 0; i <= count_table; i++) {
                                                         #}{#console.warn('value = ' + document.getElementById('nn' + podcount).innerHTML)#}{#
                                                         if (podcount < delid) {
                                                             if (arr_count_table[i] == Number(document.getElementById('nn' + podcount).innerHTML)) {
                                                                 console.log('попал в ИФ ' + document.getElementById('nn' + podcount).innerHTML);
                                                                 podcount++;
                                                             }
                                                         } else if (podcount == delid) {
                                                             #}{# 6 j = 5 #}{#
                                                             for (let j = delid; j < count_table; j++) {
                                                                 console.warn('замена id ' + (j + 1) + ' на ' + j)
                                                                 document.getElementById('stroka' + (j + 1)).setAttribute("id", "stroka" + j);
                                                                 document.getElementById('delbtn' + (j + 1)).setAttribute("id", "delbtn" + j);
                                                                 document.getElementById('nn' + (j + 1)).setAttribute("id", "nn" + j);
                                                                 document.getElementById('nn' + (j)).innerText = j;
                                                             }
                                                             podcount++
                                                         }
                                                     }#}
                                                    {# function rename_table(n) {
                                                         if (n <= 1) {
                                                             return 0;
                                                         }
                                                         if (n == document.getElementById('nn'+ podcount).slice(3,document.getElementById('nn'+ podcount).length)){
                                                             console.warn('document.getElementById("nn"+ podcount) = ' + n)
                                                         }
                                                         return n * rename_table(n - 1);
                                                     }#}


                                                    {#$(`tbody#stroka${num_id} tr`).remove();#}
                                                    {#$(`#first_table tr`).remove();#}

                                                }
                                            });


                                            let vlozheniya = []
                                            window.vlozheniya = vlozheniya

                                            {#document.getElementById('file').onchange = uploadfile_func#}

                                            function uploadfile_func() {
                                                console.log('vlozheniya = ', vlozheniya)
                                                console.log(document.getElementById('file'));
                                                console.log(5645123)
                                                const fileInput = document.getElementById('file'); // получаем элемент input для загрузки файла
                                                const file = fileInput.files[0]; // получаем выбранный файл

                                                console.log("fileInput = " + fileInput)
                                                console.log("fileInput.files[0] = " + fileInput.files[0])
                                                console.log("file = " + file)

                                                const xhr = new XMLHttpRequest(); // создаем объект XMLHttpRequest
                                                const formData = new FormData(); // создаем объект FormData для передачи файла

                                                formData.append('file', file); // добавляем файл в объект FormData
                                                file_name = this.value.replace(/.*[\/\\]/, '');
                                                console.log("file_name = ", file_name)
                                                xhr.open('POST', '/BaseFile/uploadfile'); // указываем метод и URL сервера, куда будет отправлен файл
                                                xhr.setRequestHeader("Authorization", localStorage.getItem('Authorization')); // указываем метод и URL сервера, куда будет отправлен файл
                                                xhr.send(formData);
                                                xhr.onload = function () {
                                                    console.log(`Загружено: ${xhr.status} ${xhr.response}`);
                                                    if (xhr.status == 200) {
                                                        vlozheniya.push({
                                                            name: file_name,
                                                            id: xhr.response.replaceAll('"', "")
                                                        })
                                                        div = document.createElement('div')
                                                        a = document.createElement('a')
                                                        a.href = 'javascript:void(0);'
                                                        a.target = "_blank"
                                                        a.onclick = function () {
                                                            event.preventDefault();
                                                            downloadFileFromURL('/BaseFile/download-file/' + xhr.response.replaceAll('"', ""), file_name)
                                                        }
                                                        a.innerText = file_name
                                                        div.append(a)
                                                        document.getElementsByName('TechTaskProject_form')[0].append(div)

                                                        // <a href='javascript:void(0);' target="_blank" onclick="event.preventDefault();downloadFileFromURL('/BaseFile/download-file/6d3d286e-4ab5-4f69-afdc-952a7d98137f', 'Бросить кубики онлайн.html')">Бросить кубики онлайн.html</a>

                                                    }
                                                    // $('input[name="TechTaskProject"]').prop('files')[0]["id"] = $('input[name="TechTaskProject"]').prop('files')[0]["id"].append(xhr.response)

                                                }
                                            }

                                            // $("#TechTaskProject").prop('files')[0]["id"]="iddddd"// отправляем запрос на сервер с помощью метода send()
                                            // fire the upload here

                                            function submitForm(event) {
                                                event.preventDefault(); // Предотвращаем обновление страницы
                                                console.log(123)
                                                // let form = document.getElementById("myForm");
                                                // let formData = new FormData(form);
                                                //
                                                // // Отправка данных формы с помощью AJAX-запроса
                                                // let xhr = new XMLHttpRequest();
                                                // xhr.open("POST", form.action, true);
                                                // xhr.send(formData);
                                            }

                                            const el = document.createElement('div');
                                            el.setAttribute("id", "addButton");
                                            let idButton = 1;
                                            let idButtonArr = [1];

                                            addFile.onclick = function () {
                                                {
                                                    document.getElementById('addFile').setAttribute("class", '')
                                                    idButton = idButtonArr[idButtonArr.length - 1];
                                                    {# if (window.vlozheniya.length == 0) {
                                                         console.warn('TechTaskProject', window.vlozheniya)
                                                         document.getElementsByName('TechTaskProject')[0].setAttribute("required", true)
                                                     } else#}
                                                    if (idButtonArr.length >= 2 && document.getElementById('file' + Number(idButtonArr[idButtonArr.length - 2])).value == '') {
                                                        document.getElementById('input' + Number(idButton - 1)).setAttribute("required", true)
                                                        document.getElementById('file' + Number(idButton - 1)).setAttribute("required", true)
                                                        document.getElementById('input' + Number(idButton - 1)).setAttribute('placeholder', 'Вложите файл');
                                                    } else {
                                                        let poddiv = document.createElement("div");
                                                        poddiv.setAttribute("id", "expent" + idButton);
                                                        poddiv.setAttribute("class", "expent" + idButton);
                                                        document.getElementById("testText").appendChild(poddiv);

                                                        const box = document.getElementById('expent' + idButton);
                                                        box.appendChild(el);
                                                        let button = document.createElement("input");
                                                        button.type = "button";
                                                        button.value = "Удалить файл";

                                                        button.setAttribute("id", "idButton" + idButton);
                                                        let text = document.createElement("input");

                                                        text.type = "file";
                                                        text.disabled = true;
                                                        text.setAttribute("id", "file" + idButton);
                                                        let vvod = document.createElement("input");
                                                        vvod.setAttribute("id", "input" + idButton)

                                                        vvod.type = "input";
                                                        {#let lab = document.createElement("label");
                                                        lab.setAttribute("id", "label" + idButton)
                                                        lab.name = "TechTaskProject";
                                                        lab.type = "label";
                                                        lab.innerHTML = ''#}

                                                        box.appendChild(vvod);
                                                        box.appendChild(text);
                                                        box.appendChild(button);
                                                        {#box.appendChild(lab);#}
                                                        idButton++;
                                                        idButtonArr.push(idButton);


                                                        box.addEventListener('click', function handleClick() {
                                                            if (event.target.type == 'button') {
                                                                let str = event.target.id.slice(8, event.target.id.length);

                                                                console.log('document.getElementById("expent" + str).getElementsByTagName() = ', document.getElementById('expent' + str).getElementsByTagName('a'));
                                                                if (document.getElementById('input' + str).value != '') {
                                                                    if (document.getElementById('file' + str).value != '') {
                                                                        let coll = document.getElementById('expent' + str).getElementsByTagName('a')[0].innerText;
                                                                        console.log('str = ', str, idButtonArr.indexOf(Number(str)))
                                                                        console.warn('file name id = ', vlozheniya[idButtonArr.indexOf(Number(str))].name, " ", vlozheniya[idButtonArr.indexOf(Number(str))].id)
                                                                        console.warn('Удаление файла с id: ', vlozheniya[idButtonArr.indexOf(Number(str))].id)
                                                                        vlozheniya.splice(idButtonArr.indexOf(Number(str)), 1);
                                                                    }

                                                                }
                                                                {#console.log('index = ' + vlozheniya.indexOf(coll))
                                                                console.log('coll = ' + coll)#}
                                                                console.log('str = ' + str + " idButtonArr.indexOf(str) = " + idButtonArr.indexOf(Number(str)))
                                                                document.getElementById('expent' + str).remove();
                                                                console.log(vlozheniya)
                                                                idButtonArr.splice(idButtonArr.indexOf(Number(str)), 1);
                                                                idButton = idButtonArr[idButtonArr.length - 1];
                                                            }
                                                        });
                                                        box.addEventListener('change', e => {
                                                            if (event.target.id.slice(0, 4) == 'file') {
                                                                let str = event.target.id.slice(4, event.target.id.length);
                                                                document.getElementById('file' + str).onchange = uploadfile_func1('file' + str);
                                                                document.getElementById('input' + str).setAttribute('readonly', true);
                                                            } else if (event.target.id.slice(0, 5) == 'input') {
                                                                let str = event.target.id.slice(5, event.target.id.length);
                                                                document.getElementById('file' + str).disabled = false;
                                                                console.log("str111", str);
                                                            }
                                                        })
                                                    }
                                                }
                                            };

                                            function uploadfile_func1(str) {
                                                console.log('vlozheniya = ', vlozheniya)
                                                console.log('uploadfile_func1: ' + str)
                                                console.log(document.getElementById(str));
                                                const fileInput = document.getElementById(str); // получаем элемент input для загрузки файла
                                                console.log("fileInput = " + fileInput)
                                                const file = fileInput.files[0]; // получаем выбранный файл
                                                console.log("file = " + file)
                                                console.log("fileInput.files = " + fileInput.files)

                                                const xhr = new XMLHttpRequest(); // создаем объект XMLHttpRequest
                                                const formData = new FormData(); // создаем объект FormData для передачи файла

                                                formData.append('file', file); // добавляем файл в объект FormData

                                                file_name = document.getElementById(str).value.replace(/.*[\/\\]/, '');

                                                console.log("file_name = ", file_name)
                                                xhr.open('POST', '/BaseFile/uploadfile'); // указываем метод и URL сервера, куда будет отправлен файл
                                                xhr.setRequestHeader("Authorization", localStorage.getItem('Authorization')); // указываем метод и URL сервера, куда будет отправлен файл
                                                xhr.send(formData);
                                                xhr.onload = function () {
                                                    console.log(`Загружено: ${xhr.status} ${xhr.response}`);
                                                    if (xhr.status == 200) {
                                                        vlozheniya.push({
                                                            name: file_name,
                                                            id: xhr.response.replaceAll('"', "")
                                                        })
                                                        div = document.createElement('div')
                                                        a = document.createElement('a')
                                                        a.href = 'javascript:void(0);'
                                                        a.target = "_blank"
                                                        a.onclick = function () {
                                                            event.preventDefault();
                                                            downloadFileFromURL('/BaseFile/download-file/' + xhr.response.replaceAll('"', ""), file_name)
                                                        }
                                                        a.innerText = file_name

                                                        let lab = document.createElement("label");
                                                        lab.setAttribute("id", "label" + str.replace('file', ''))
                                                        lab.type = "label";
                                                        lab.style = "margin-right: 10px";
                                                        lab.innerText = document.getElementById('input' + str.replace('file', '')).value;
                                                        div.append(lab);
                                                        div.append(a);

                                                        console.log(div)
                                                        document.getElementById('expent' + str.slice(4, str.length)).appendChild(div);
                                                        {#document.getElementById('label' + str).innerHTML = document.getElementById('input' + str).value;#}
                                                        // <a href='javascript:void(0);' target="_blank" onclick="event.preventDefault();downloadFileFromURL('/BaseFile/download-file/6d3d286e-4ab5-4f69-afdc-952a7d98137f', 'Бросить кубики онлайн.html')">Бросить кубики онлайн.html</a>
                                                        console.warn(str)
                                                        document.getElementById(str).disabled = true;
                                                    }
                                                    // $('input[name="TechTaskProject"]').prop('files')[0]["id"] = $('input[name="TechTaskProject"]').prop('files')[0]["id"].append(xhr.response)

                                                }
                                            }
                                        </script>