<div class="panel-body">
    <div class="row">
        <div class="col-lg-12">
            <form role="form" id="formFrame">

                <div class="form-group">
                    <label>Добавление раздела</label>
                    <select class="form-control form-group" id="select_one">
                        <option value="0">Земляные работы</option>
                        <option value="1">Бетонные работы</option>
                        <option value="2">Отделочные работы</option>
                        <option value="3">4</option>
                        <option value="4">5</option>
                    </select>
                    <button id='add_razdel' type="button" class="btn btn-primary"> Добавить раздел</button>
                    <button id='del_razdel' type="button" class="btn btn-primary"> Удалить раздел</button>


                </div>

                <div class="style_table table-responsive-pto" id='style_table' style="display:block;">
                    <table class="first iksweb" id="first_table">
                    <tbody id = "earthWorks_1">
                    <tr><td colspan="6" style="padding: 0;"><input id = 'input_zagolovok'  list="zagolovok" style = "width: 100%; height: 100%; border:  0;">
                                <datalist id="zagolovok">
                                </datalist></td>
                    </tr>
                        <tr style="background-color: #fce1b3">
                            <td>№</td>
                            <td rowspan="2">Наименование</td>
                            <td colspan="4">Стоимость</td>
                            <td colspan="4">Справочная информация</td>
                            <td colspan="8">Аналитический блок</td>
                        </tr>

                        <tr style="background-color: #fce1b3">
                            <td>п/п</td>
                            <td>Ед.изм.</td>
                            <td>Кол-во</td>
                            <td>Цена</td>
                            <td>Всего</td>
                            <td rowspan="1">Тр-затр (чел-дн)</td>
                            <td rowspan="1">Столбец для анализа</td>
                            <td rowspan="1"></td>
                            <td rowspan="1">Примечание</td>
                            <td>Кол-во</td>
                            <td>Цена руб-ед</td>
                            <td>Всего</td>
                            <td>Тр-затр (чел-дн)</td>
                            <td>Стоимость дня рабочего</td>
                        </tr>
                        </tbody>
                        <tbody id = 'earthWorks_costWork_1'>
                        <tr>
                            <td contenteditable="false">1</td>
                            <td contenteditable="false" id = 'earthWorks_costWork_addLine_1' style="font-weight: bold;" colspan="4" onmouseover="showButton(event, this)" onmouseout="closeButton(event,this)">
                            Стоимость работ
                            <div style = "display: none"><button  onclick="addLine(event,this)">addLine</button></div>
                            </td>
                            <td contenteditable="true"></td>


                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                        </tr>
                    <tbody id = 'earthWorks_costMaterial_1'>
                        <tr>
                            <td contenteditable="false">2</td>
                            <td contenteditable="false" id = 'earthWorks_costMaterial_addLine_1' style="font-weight: bold;" colspan="4" onmouseover="showButton(event, this)" onmouseout="closeButton(event,this)">
                            Стоимость материала
                            <div style = "display: none"><button  onclick="addLine(event,this)">addLine</button></div>
                            </td>

                            <td contenteditable="true"></td>


                            <td contenteditable="false" colspan="2"> Ед изм расчётные </td>

                            <td contenteditable="false"> Ед изм (М2) для окраски </td>

                            <td contenteditable="true"></td>

                            <td contenteditable="false">Закупка по счету - ед изм расчётные</td>
                            <td contenteditable="false">Остаток закупки</td>
                            <td contenteditable="false">ед изм к закупке</td>
                            <td contenteditable="false">руб-ед</td>
                            <td contenteditable="true"></td>
                            <td contenteditable="false">Счёта</td>
                            <td contenteditable="false">Срок поставки</td>
                            <td contenteditable="false">ПРИМЕЧАНИЕ</td>
                        </tr>
                    </tbody>

                    <tbody id = 'earthWorks_Special_1'>
                    <tr>
                            <td contenteditable="false">3</td>

                            <td contenteditable="false" id = 'earthWorks_Special_addLine_1' style="font-weight: bold;" colspan="4" onmouseover="showButton(event, this)" onmouseout="closeButton(event,this)">
                            Стоимость спецтехники
                            <div style = "display: none"><button  onclick="addLine(event,this)">addLine</button></div>
                            </td>

                            <td contenteditable="true"></td>


                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>

                            <td contenteditable="true"></td>

                            <td contenteditable="false">Стоимость аренды</td>
                            <td contenteditable="false">Телефон</td>
                            <td contenteditable="false">Счет</td> {# под ней вложение #}
                            <td contenteditable="false">Срок</td>

                        </tr>

                    </tbody>

                     <tbody id = 'earthWorks_Total_1'>
                        <tr>
                            <td contenteditable="false">4</td>
                            <td contenteditable="false" style="font-weight: bold;" colspan="4"> Итого
                            </td>


                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>


                        </tr>
                        <tr id = "stroka${id_create}">
                            <td contenteditable="false">5</td>
                            <td contenteditable="false">
                                Накладные расходы
                            </td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>



                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>


                        </tr>

                        <tr id = "stroka${id_create}">
                            <td contenteditable="false">6</td>
                            <td contenteditable="false">
                                Вспомогательные материалы
                            </td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>



                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>


                        </tr>

                        <tr id = "stroka${id_create}">
                            <td contenteditable="false">7</td>
                            <td contenteditable="false">
                                Транспортные расходы
                            </td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>



                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>


                        </tr>

                        <tr id = "stroka${id_create}">
                            <td contenteditable="false">8</td>
                            <td contenteditable="false" style="font-weight: bold; text-align: right">
                                ВСЕГО:
                            </td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>



                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>

                        </tr>
                        <tr id = "stroka${id_create}">
                            <td contenteditable="false">9</td>
                            <td contenteditable="false" style="font-weight: bold;">
                                В том числе НДС - 20% за нал от материалов
                            </td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>


                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>

                        </tr>
                    </tbody>
                    </table>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
const table = document.getElementById('first_table');

    let coll_table = 2;
    let arr_coll_table = [1,2];
    let id_count = 1;
    let arr_id_count = [1];

    function objLine(id_count, forTable) {
        let addLineObj = new Object();
        addLineObj = {
            'earthWorks_costWork': `<tr id = "stroka_${id_count}">
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>


                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"><button type = "button" aria-hidden="true" class="delbtn fa fa-trash-o" id="delbtn_${id_count}"></button></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        </tr>`,
            'earthWorks_costMaterial': `<tr id = "stroka_${id_count}">
<td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>


                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"><button type = "button" aria-hidden="true" class="delbtn fa fa-trash-o" id="delbtn_${id_count}"></button></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        </tr>`,
            'earthWorks_Special': `<tr id = "stroka_${id_count}">
<td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>


                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"><button type = "button" aria-hidden="true" class="delbtn fa fa-trash-o" id="delbtn_${id_count}"></button></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        </tr>`,
        };

        console.warn('!!!',addLineObj[forTable])
        return addLineObj[forTable];
    }


let time
function showButton (event, elem){
console.warn(document.getElementsByTagName('NameTechTask'))
{#time = setTimeout(function (){#}
elem = elem.id;
{#console.warn('child = ',elem, ' ', document.getElementById(elem).childNodes[1])#}
document.getElementById(elem).childNodes[1].style.display = "block";

//}, 500)
}

function closeButton (event,elem){
{#if (time){clearTimeout(time)}#}
elem = elem.id;
document.getElementById(elem).childNodes[1].style.display = "none";
}

function addLineSpecial(element){
console.warn('!! do element = ',element)
element = element.parentElement.parentElement.parentElement.parentElement;
console.warn('element = ',element)
let element_id = element.id;
console.warn('id = ',element_id)
let arrIdTable = [];

       $(`#${element_id} tr`).each(function () {
           arrIdTable.push(this.id);
       });
       console.warn(arrIdTable, arrIdTable.length);



$(element).append(`<tr id = "stroka_${id_count}">
<td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>


                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"><button type = "button" aria-hidden="true" class="delbtn fa fa-trash-o" id="delbtn_${id_count}"></button></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        </tr>`)
                        counterTr();
            id_count++;
            arr_id_count.push(id_count);
}
function addLineCostWork(element){
console.warn('!! do element = ',element)
element = element.parentElement.parentElement.parentElement.parentElement;
console.warn('element = ',element)
let element_id = element.id;
console.warn('id = ',element_id)
let arrIdTable = [];

       $(`#${element_id} tr`).each(function () {
           arrIdTable.push(this.id);
       });
       console.warn(arrIdTable, arrIdTable.length);


$(element).append(`<tr id = "stroka_${id_count}">
<td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>


                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"><button type = "button" aria-hidden="true" class="delbtn fa fa-trash-o" id="delbtn_${id_count}"></button></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        <td contenteditable="true"></td>
                        </tr>`)
                        counterTr();
            id_count++;
            arr_id_count.push(id_count);
}
function addLine(event, element){
console.warn('target:',event.target)
console.warn('!! do element = ',element)
element = element.parentElement.parentElement.parentElement.parentElement;
console.warn('element = ',element)
let element_id = element.id;
console.warn('id = ',element_id)
let forObj = element_id.slice(0, element_id.lastIndexOf('_'))
console.warn('forObj: ',forObj)

let arrIdTable = [];

       $(`#${element_id} tr`).each(function () {
           arrIdTable.push(this.id);
       });
       console.warn(arrIdTable, arrIdTable.length);


$(element).append(objLine(id_count, forObj))
counterTr();
            id_count++;
            arr_id_count.push(id_count);
}
    function set_options_datalist(customer_id, element_id ,search, count = 10) {
    $.ajax({
        method: 'POST',
        url: "/suggest/getSuggest",
        headers: {
            Accept: 'application/json',
            'Content-Type': 'application/json',
            "Authorization": localStorage.getItem('Authorization')
        },
        data: `{"customer_id":"${customer_id}","search": "${search}","count":${count}}`,
        success: function (ingredients) {
            $(`#${element_id}`).empty();
            for (var i in ingredients) {
                $("<option/>").html(ingredients[i].value_table).appendTo(`#${element_id}`);
            }
        }
    });
}

$(document).on("keyup", 'input', function (event) {
    var _this = $(this);
    var value = _this.val();
    set_options_datalist("type", $(this)[0].list.id, value, 5)
});

    document.getElementById('add_razdel').onclick = function () {
        let e = document.getElementById("select_one");
        let value = e.value;
        let text = e.options[e.selectedIndex].text;

        $("#first_table").append(`<tbody id = "earthWorks_${coll_table}">
                    <tr><td colspan="6" style="padding: 0;"><input id = 'input_zagolovok'  list="zagolovok" style = "width: 100%; height: 100%; border:  0;">
                                <datalist id="zagolovok">
                                </datalist></td>
                    </tr>
                        <tr style="background-color: #fce1b3">
                            <td>№</td>
                            <td rowspan="2">Наименование</td>
                            <td colspan="4">Стоимость</td>
                            <td colspan="4">Справочная информация</td>
                            <td colspan="8">Аналитический блок</td>
                        </tr>

                        <tr style="background-color: #fce1b3">
                            <td>п/п</td>
                            <td>Ед.изм.</td>
                            <td>Кол-во</td>
                            <td>Цена</td>
                            <td>Всего</td>
                            <td rowspan="1">Тр-затр (чел-дн)</td>
                            <td rowspan="1">Столбец для анализа</td>
                            <td rowspan="1"></td>
                            <td rowspan="1">Примечание</td>
                            <td>Кол-во</td>
                            <td>Цена руб-ед</td>
                            <td>Всего</td>
                            <td>Тр-затр (чел-дн)</td>
                            <td>Стоимость дня рабочего</td>
                        </tr>
                        </tbody>
                        <tbody id = 'earthWorks_costWork_${coll_table}'>
                        <tr>
                            <td contenteditable="false"></td>
                            <td contenteditable="false" id = 'earthWorks_costWork_addLine_${coll_table}' style="font-weight: bold;" colspan="4" onmouseover="showButton(event, this)" onmouseout="closeButton(event,this)">
                            Стоимость работ
                            <div style = "display: none"><button  onclick="addLine(event,this)">addLine</button></div>
                            </td>
                            <td contenteditable="true"></td>


                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                        </tr>
                    <tbody id = 'earthWorks_costMaterial_${coll_table}'>
                        <tr>
                            <td contenteditable="false"></td>
                            <td contenteditable="false" id = 'earthWorks_costMaterial_addLine_${coll_table}' style="font-weight: bold;" colspan="4" onmouseover="showButton(event, this)" onmouseout="closeButton(event,this)">
                            Стоимость материала
                            <div style = "display: none"><button  onclick="addLine(event,this)">addLine</button></div>
                            </td>
                            <td contenteditable="true"></td>


                            <td contenteditable="false" colspan="2"> Ед изм расчётные </td>

                            <td contenteditable="false"> Ед изм (М2) для окраски </td>

                            <td contenteditable="true"></td>

                            <td contenteditable="false">Закупка по счету - ед изм расчётные</td>
                            <td contenteditable="false">Остаток закупки</td>
                            <td contenteditable="false">ед изм к закупке</td>
                            <td contenteditable="false">руб-ед</td>
                            <td contenteditable="true"></td>
                            <td contenteditable="false">Счёта</td>
                            <td contenteditable="false">Срок поставки</td>
                            <td contenteditable="false">ПРИМЕЧАНИЕ</td>
                        </tr>
                    </tbody>

                    <tbody id = 'earthWorks_Special_${coll_table}'>
                    <tr>
                            <td contenteditable="false"></td>
                             <td contenteditable="false" id = 'earthWorks_Special_addLine_${coll_table}' style="font-weight: bold;" colspan="4" onmouseover="showButton(event, this)" onmouseout="closeButton(event,this)">
                            Стоимость спецтехники
                            <div style = "display: none"><button  onclick="addLine(event,this)">addLine</button></div>
                            </td>
                            <td contenteditable="true"></td>


                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>

                            <td contenteditable="true"></td>

                            <td contenteditable="false">Стоимость аренды</td>
                            <td contenteditable="false">Телефон</td>
                            <td contenteditable="false">Счет</td>
                            <td contenteditable="false">Срок</td>

                        </tr>

                    </tbody>

                     <tbody id = 'earthWorks_Total_${coll_table}'>
                        <tr>
                            <td contenteditable="false"></td>
                            <td contenteditable="false" style="font-weight: bold;" colspan="4"> Итого
                            </td>


                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>


                        </tr>
                        <tr id = "stroka">
                            <td contenteditable="false"></td>
                            <td contenteditable="false">
                                Накладные расходы
                            </td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>



                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>


                        </tr>

                        <tr id = "stroka">
                            <td contenteditable="false"></td>
                            <td contenteditable="false">
                                Вспомогательные материалы
                            </td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>



                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>


                        </tr>

                        <tr id = "stroka">
                            <td contenteditable="false"></td>
                            <td contenteditable="false">
                                Транспортные расходы
                            </td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>



                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>


                        </tr>

                        <tr id = "stroka">
                            <td contenteditable="false"></td>
                            <td contenteditable="false" style="font-weight: bold; text-align: right">
                                ВСЕГО:
                            </td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>



                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>

                        </tr>
                        <tr id = "stroka">
                            <td contenteditable="false"></td>
                            <td contenteditable="false" style="font-weight: bold;">
                                В том числе НДС - 20% за нал от материалов
                            </td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>


                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>
                            <td contenteditable="true"></td>

                        </tr>
                    </tbody>`)


        coll_table++;
        arr_coll_table.push(coll_table);
        counterTr();

        }

 function counterTr(){
let arr_tbody = [];
let arr_tr = [];
let last_index = 0;
let razdelov = 0;

                $(`#first_table tbody`).each(function () {
                    arr_tbody.push(this.id);
                });
                if (arr_tbody.length >= 5){
          razdelov = arr_tbody.length / 5;
          console.warn('razdelov v tablice = ', razdelov)
          }

                {#console.warn('arr_tbody = ' , arr_tbody,' arr_tbody.length = ' , arr_tbody.length);#}
for(let j = 1; j <= razdelov; j++){
arr_tr = []
for (let i of arr_tbody){
if (i.slice(0, i.lastIndexOf('_')) != 'earthWorks'){
console.warn(i)
if(i.slice(i.lastIndexOf('_')+1, i.length) == j){
$(`#${i} tr`).each(function () {
                    this.firstElementChild.innerHTML = arr_tr.length + 1;
                    arr_tr.push(this.id);
          });
          }

}
}


}

}

$(document).on('change', 'input', function () {
        let val = $(this).val();
        console.warn(val);
        console.warn($(this)[0].list.id);
        $(this)[0].setAttribute('value', val); {# добавляется атрибут value в изменяемый input#}
        let options_id = $(this)[0].list.id
        let options = $(`datalist#${options_id}`)[0].options;
        console.warn(options);
  });

    table.addEventListener('click', function handleClick(event) {
        if (event.target.type == 'button' && (event.target.id.slice(0,event.target.id.lastIndexOf('_')) == 'button_table_2' || event.target.id.slice(0,event.target.id.lastIndexOf('_')) == 'button_table_1')){
            let str = event.target.id.slice(event.target.id.lastIndexOf('_')+1, event.target.id.length);
            addLineString(str, event.target.id, id_count);
            id_count++;
            arr_id_count.push(id_count);
        } else if (event.target.type == 'button' && event.target.id.slice(0,event.target.id.lastIndexOf('_')) == 'delbtn'){
        console.warn('tyt', event.target.id)
            delLine(event.target.id);
        }

    });

    function delLine(cel){
        console.warn('cel= ' + cel)
        let id_table = document.getElementById(cel).parentElement.parentElement.parentElement.id;
        id_table = id_table.slice(id_table.lastIndexOf('_')+1,id_table.length)
        console.log('tbody = ' + id_table)
        let id_del = cel.slice(cel.lastIndexOf('_')+1, cel.length)
        console.warn(id_del)
        console.warn(document.getElementById('stroka_' + id_del))
        document.getElementById(`stroka_${id_del}`).remove()

                counterTr();
    }



</script>
